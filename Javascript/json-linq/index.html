<!DOCTYPE html>
<html>
	<head>
		<style>

		</style>
	</head>
	<body>

		<ndm-console id="console">
			<div class="column"></div>
			<div class="column"></div>
		</ndm-console>



		<script src="json-linq.js"></script>
		<script>

			async function getJson(url) {
				return new Promise((resolve, reject) => {
					var xmlhttp = new XMLHttpRequest();
					xmlhttp.onreadystatechange = function() {
						if (this.readyState == 4 && this.status == 200) {
							resolve(this.responseText);
						}
					};

					xmlhttp.open("GET", url, true);
					xmlhttp.send();
				});
			}

			var jsonFiles = ["event-table.json", "market-list.json"];
			var promises = [];
			for(var jsonFile of jsonFiles) {
				promises.push(getJson(`./${jsonFile}`));
			}

			Promise.all(promises).then((jsonStrings) => {

			});

			// // events table with 2 columns
			// var json = new JsonLinq(eventsTableWith2ColumnsString);
			// var markets = json.select("markets").find((item) => item.lineValue !== "");
			// var marketId_WithLineValue = markets.id;
			// var selections = json.select("selections").filter((item) => item.marketId === marketId_WithLineValue);
			// console.log({markets});
			// console.log({selections});

			// // market list widget		
			// var json2 = new JsonLinq(marketListWidgetString);
			// var markets2 = json2.select("markets").find((item) => item.lineValue !== "");
			// var marketId_WithLineValue2 = markets2.id;
			// var selections2 = json2.select("selections").filter((item) => item.marketId === marketId_WithLineValue2);
			// console.log({markets2});
			// console.log({selections2});
		</script>
	</body>
</html>