<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>My Application</title>
		<script src="https://unpkg.com/mithril/mithril.js"></script>

		<style>
		.user-list { 
			list-style:none;
			margin:0 0 10px;
			padding:0;
		}

		.user-list-item {
			background:#fafafa;
			border:1px solid #ddd;color:#333;
			display:block;
			margin:0 0 1px;
			padding:8px 15px;
			text-decoration:none;
		}

		.user-list-item:hover {
			text-decoration:underline;
		}
		</style>
	</head>

	<body>
		<div id="users">

		</div>
		<script>
			var ControllerClass = function() {
				var User = {
					list: [],
					loadList: function() {
						return m.request({
							method: "GET",
							url: "https://rem-rest-api.herokuapp.com/api/users",
							withCredentials: true,
						})
						.then(function(result) {
							User.list = result.data
						})
					},
				};
	
				var UserView = {
					// oninit: User.loadList,
					view: function() {
						return m(".user-list", User.list.map(function(user) {
							return m(".user-list-item", user.firstName + " " + user.lastName)
						}))
					}
				};	
				
				this.Render = function() {
					
					User.loadList();
					m.mount(document.body, UserView);
				}
			}

			var ctrl = new ControllerClass();
			ctrl.Render();
		</script>
	</body>
</html>