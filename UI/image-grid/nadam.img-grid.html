<!DOCTYPE html>
<html>
	<head>
		<script src="./nadam.img-grid.js"></script>
	
		<style>
			#masonry {
				display: grid;
				grid-template-columns: 100px 100px 100px 100px 100px 100px;
				justify-content: center;
			}

			body {
				font-size: 21px;
			}
		</style>
	</head>
	<body>

		<button onclick="imgGrid.printGrid(content)">Print grid</button>
		<button onclick="clearContent()">Clear content</button>

		<button onclick="addPortrait()">Add portratit</button>
		<button onclick="addLandscape()">Add landscape</button>

		<div id="content">

		</div>

		<div class="grid" id="masonry">

				<div class="grid-item portrait">
					<img src="./content/3-2-portrait.png">
				</div>
				<div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>
				 <div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>
				<div class="grid-item portrait">
					<img src="./content/3-2-portrait.png">
				</div>			
				<div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>				
				<div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>			
				<div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>
				<div class="grid-item portrait">
					<img src="./content/3-2-portrait.png">
				</div>			 
				<div class="grid-item landscape">
					<img src="./content/3-2-landscape.png">
				</div>		
				<div class="grid-item portrait">
					<img src="./content/3-2-portrait.png">
				</div>
				<div class="grid-item portrait">
					<img src="./content/3-2-portrait.png">
				</div> 
		</div>

		<script>

			function clearContent() {

				content.innerHTML = "";
			}

			function addPortrait() {

				var s = imgGrid.nextFreeArea(0, 0, 3, 2);
				imgGrid.reserve(s.i, s.j, 3, 2);
				imgGrid.printGrid(content);
			}

			function addLandscape() {

				var s = imgGrid.nextFreeArea(0, 0, 2, 3);
				imgGrid.reserve(s.i, s.j, 2, 3);
				imgGrid.printGrid(content);
			}

			var content = document.getElementById("content");
			var imgGrid = new ImageGrid(8, 12);
			

			// var s = imgGrid.nextFreeArea(0, 0, 3, 2);
			// imgGrid.reserve(s.i, s.j, 3, 2);
			// var s = imgGrid.nextFreeArea(0, 0, 2, 3);
			// imgGrid.reserve(s.i, s.j, 2, 3);
			// var s = imgGrid.nextFreeArea(0, 0, 3, 2);
			// imgGrid.reserve(s.i, s.j, 3, 2);
			//imgGrid.printGrid(content);

			var gridItems = document.getElementsByClassName("grid-item");
			for(var i = 0; i < gridItems.length; ++i) {

				/*
					grid-column: 2 / 4;
					grid-row: 1 / 3;
				*/
				if( gridItems[i].classList.contains("portrait") ) {

					var s = imgGrid.nextFreeArea(0, 0, 3, 2);
					imgGrid.reserve(s.i, s.j, 3, 2);
					// imgGrid.printGrid(content);
					gridItems[i].style["grid-column"] = s.j+1 + "/span 2";
					gridItems[i].style.gridRow = s.i+1 + "/span 3";
				}
				else {
					var s = imgGrid.nextFreeArea(0, 0, 2, 3);
					imgGrid.reserve(s.i, s.j, 2, 3);
					// imgGrid.printGrid(content);
					gridItems[i].style["grid-column"] = s.j+1 + "/span 3";
					gridItems[i].style.gridRow = s.i+1 + "/span 2";
				}
			}

		</script>
	</body>
</html>